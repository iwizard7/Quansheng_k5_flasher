# Quansheng K5 Tool для macOS

Это приложение для работы с радиостанцией Quansheng K5 на macOS.

## Возможности

- **Калибровка батареи**: Чтение и запись калибровочных данных батареи
- **Управление прошивкой**: Чтение версии прошивки и обновление устройства
- **Настройки устройства**: Изменение основных параметров радиостанции
- **Управление каналами**: Редактирование, импорт и экспорт каналов
- **Информация об устройстве**: Просмотр технических характеристик

## Системные требования

- macOS 14.0 или новее
- Процессор Apple Silicon (ARM64) или Intel x86_64
- USB-подключение к радиостанции Quansheng K5

## Запуск приложения

### Способ 1: Через Finder
1. Откройте папку с проектом
2. Дважды кликните на `QuanshengK5Tool.app`

### Способ 2: Через терминал
```bash
./run_app.sh
```

### Способ 3: Прямой запуск
```bash
open QuanshengK5Tool.app
```

## Первый запуск

При первом запуске macOS может показать предупреждение о безопасности, так как приложение не подписано цифровой подписью разработчика. Для запуска:

1. Откройте **Системные настройки** → **Конфиденциальность и безопасность**
2. В разделе "Безопасность" найдите сообщение о заблокированном приложении
3. Нажмите **"Все равно открыть"**

Или используйте команду в терминале:
```bash
sudo xattr -rd com.apple.quarantine QuanshengK5Tool.app
```

## Подключение устройства

1. Подключите радиостанцию Quansheng K5 к компьютеру через USB
2. Переведите радиостанцию в режим программирования
3. Запустите приложение
4. **Выберите порт** из выпадающего списка (например, `/dev/cu.usbserial-*` или `/dev/cu.usbmodem-*`)
5. Нажмите кнопку **"Обновить порты"** если порт не отображается
6. Нажмите кнопку **"Подключиться"**

### Выбор правильного порта

Приложение автоматически сканирует доступные USB-порты и отображает их в выпадающем списке. Обычно порты имеют следующие названия:

- **FTDI адаптеры**: `/dev/cu.usbserial-*` или `/dev/tty.usbserial-*`
- **CP210x адаптеры**: `/dev/cu.SLAB_USBtoUART` или `/dev/tty.SLAB_USBtoUART`
- **CH340 адаптеры**: `/dev/cu.usbserial-*` или `/dev/tty.usbserial-*`
- **Встроенные USB**: `/dev/cu.usbmodem-*` или `/dev/tty.usbmodem-*`

Если вы не уверены, какой порт выбрать:
1. Отключите радиостанцию
2. Нажмите **"Обновить порты"** и запомните список
3. Подключите радиостанцию
4. Снова нажмите **"Обновить порты"** - новый порт и есть ваше устройство

## Основные функции

### Калибровка батареи
- Считывание текущих калибровочных данных
- Редактирование и сохранение новых значений
- Экспорт/импорт калибровочных файлов

### Управление каналами
- Редактирование параметров каналов (частота, мощность, тоны)
- Импорт/экспорт в форматах JSON, CSV, CHIRP
- Валидация настроек каналов

### Настройки устройства
- Изменение частоты по умолчанию
- Настройка мощности передачи
- Управление подсветкой дисплея

## Форматы файлов

### JSON
Собственный формат приложения для полного сохранения всех настроек каналов.

### CSV
Стандартный табличный формат для редактирования в Excel или других программах.

### CHIRP
Совместимость с популярной программой CHIRP для программирования радиостанций.

## Устранение неполадок

### Устройство не обнаруживается
1. Проверьте USB-подключение
2. Убедитесь, что радиостанция в режиме программирования
3. Попробуйте другой USB-кабель или порт

### Ошибки подключения
1. Закройте другие программы, работающие с радиостанцией
2. Перезапустите приложение
3. Отключите и снова подключите устройство

### Проблемы с разрешениями
Приложение требует доступа к USB-устройствам. Если возникают проблемы:
```bash
sudo chmod 666 /dev/tty.usbserial*
```

## Техническая информация

- **Язык программирования**: Swift
- **Фреймворк**: SwiftUI
- **Минимальная версия macOS**: 14.0
- **Архитектуры**: ARM64, x86_64

## Безопасность

Приложение использует следующие разрешения:
- `com.apple.security.device.usb` - доступ к USB-устройствам
- `com.apple.security.files.user-selected.read-write` - чтение/запись выбранных файлов
- `com.apple.security.app-sandbox` - работа в песочнице macOS

## Сборка из исходного кода

Если вы хотите собрать приложение самостоятельно:

```bash
# Клонируйте репозиторий
git clone <repository-url>
cd QuanshengK5Tool

# Соберите проект
xcodebuild -project QuanshengK5Tool.xcodeproj -scheme QuanshengK5Tool -configuration Release CODE_SIGN_IDENTITY="" CODE_SIGNING_REQUIRED=NO clean build

# Скопируйте готовое приложение
cp -R build/Build/Products/Release/QuanshengK5Tool.app ./
```

## Лицензия

Этот проект предназначен для образовательных и некоммерческих целей.

## Отказ от ответственности

Использование данного программного обеспечения осуществляется на ваш собственный риск. Авторы не несут ответственности за возможные повреждения оборудования или потерю данных.

---

**Примечание**: Это приложение создано сообществом и не является официальным продуктом Quansheng.